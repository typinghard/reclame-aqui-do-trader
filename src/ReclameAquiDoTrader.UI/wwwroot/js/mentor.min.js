$(document).ready(function(){var e,a;listaTelefones=[],listaEmails=[],listaRedesSociais=[],$(".ladda-button-demo").ladda(),$(".select2_redesocial").select2({dropdownParent:$(".modal-body"),theme:"bootstrap4",placeholder:"Selecione um Tipo",allowClear:!0}),$(".select2_areaAtuacao").select2({dropdownParent:$(".modal-body"),theme:"bootstrap4",placeholder:"Escreva uma area de atuação",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},templateResult:function(e){var a=$("<span></span>");return a.text(e.text),e.newOption&&a.append(" <em>(novo)</em>"),a}}),$(".select2_redesocial").on("select2:unselect",function(e){e.params.data,$("#campoUrl").val("")}),$(".select2_redesocial").on("select2:select",function(e){var a=e.params.data;switch(a.text.toLocaleLowerCase()){case"instagram":$("#campoUrl").val("www.instagram.com");break;case"facebook":$("#campoUrl").val("www.facebook.com");break;default:$("#campoUrl").val("")}}),$(".btn-salvar-telefone").on("click",function(e){var a=$("#campoTelefone").val();listaTelefones.push({Numero:a});var o=' <a data-toggle="tooltip" class="col-sm btn btn-remover-telefone acao-telefone" data-numero="'+a+'" title="Remover"><i class="fa fa-times text-danger" data-toggle="tooltip" title="Remover" style="width:22px;"></i></a>',t='<div class="col-sm row pb-1 border-bottom border-top m-0"><div class="col-sm pt-2 numero-telefone"><span>'+a+"</span></div>"+o+"</div>";console.log(t),$("#divTelefones").append(t),$("#campoTelefone").val(""),$(".btn-remover-telefone").unbind("click"),$(".btn-remover-telefone").on("click",function(e){var a=listaTelefones.findIndex(e=>e.Numero===$(this).data("numero"));listaTelefones.splice(a,1),$(this).parent().remove()})}),$(".btn-salvar-email").on("click",function(e){var a=$("#campoEmail").val();listaEmails.push({Endereco:a});var o=' <a data-toggle="tooltip" class="col-sm btn btn-remover-email acao-telefone" data-endereco="'+a+'" title="Remover"><i class="fa fa-times text-danger" data-toggle="tooltip" title="Remover" style="width:22px;"></i></a>',t='<div class="col-sm row pb-1 border-bottom border-top m-0"><div class="col-sm pt-2 numero-telefone"><span data-toggle="tooltip" title="'+a+'">'+a+"</span></div>"+o+"</div>";console.log(t),$("#divEmails").append(t),$("#campoEmail").val(""),$(".btn-remover-email").unbind("click"),$(".btn-remover-email").on("click",function(e){var a=listaEmails.findIndex(e=>e.Endereco===$(this).data("endereco"));listaEmails.splice(a,1),$(this).parent().remove()})}),$(".btn-salvar-redeSocial").on("click",function(e){if(0!==$("#campoRedeSocial").val().length&&0!==$("#campoUrl").val().length&&0!==$("#campoUsuario").val().length){var a=parseInt($("#campoRedeSocial").val()),o=$("#campoUrl").val(),t=$("#campoUsuario").val(),l=o+"/"+t;listaRedesSociais.push({Url:o,Usuario:t,Tipo:a});var s=function(e,a){var o="";switch(e){case 0:o='<i class="fa fa-facebook-square"></i>';break;case 1:o='<i class="fa fa-instagram"></i>';break;default:o='<i class="fa fa-question"></i>'}return o+=" "+a}(a,t),r=' <a data-toggle="tooltip" class="col-sm btn btn-remover-redeSocial acao-telefone" data-url="'+l+'"  title="Remover"><i class="fa fa-times text-danger" data-toggle="tooltip" title="Remover" style="width:22px;"></i></a>',i='<div class="col-sm row pb-1 border-bottom border-top m-0"><div class="col-sm pt-2 numero-telefone" data-url="'+o+'" data-tipo="'+a+'" data-usuario="'+t+'"><span data-toggle="tooltip" title="'+o+'">'+s+"</span></div>"+r+"</div>";console.log(i),$("#divRedesSociais").append(i),$(".select2_redesocial").val(null).trigger("change"),$("#campoUrl").val(""),$("#campoUsuario").val(""),$(".btn-remover-redeSocial").unbind("click"),$(".btn-remover-redeSocial").on("click",function(e){var a=listaRedesSociais.findIndex(e=>e.Url+"/"+e.Usuario===$(this).data("redeSocial"));listaRedesSociais.splice(a,1),$(this).parent().remove()})}}),e=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},a={onKeyPress:function(a,o,t,l){t.mask(e.apply({},arguments),l)}},$("#campoTelefone").mask(e,a),$(".btn-salvar").on("click",function(e){if(function(){if(0===$("#nome").val().length)return $(".form-group-nome").toggleClass("has-error"),$(".msg-validacao").toggleClass("invisible"),$("#nome").focus(),!1;$(".form-group-nome").hasClass("has-error")&&($(".form-group-nome").toggleClass("has-error"),$(".msg-validacao").toggleClass("invisible"));return!0}()){var a={Nome:$("#nome").val(),Site:$("#site").val(),AreasDeAtuacao:$(".select2_areaAtuacao").val(),Telefones:listaTelefones,Emails:listaEmails,RedesSociais:listaRedesSociais};console.log(a);var o=$("input[name='__RequestVerificationToken']").val();$(".ladda-button-demo").ladda("start"),$.ajax({headers:{RequestVerificationToken:o},url:$(this).data("url"),type:"post",contentType:"application/json;",data:JSON.stringify(a),success:function(e){$(".painel-mentor").load(e.url,function(){$("#modalGenerico").modal("hide")}),toastr.success("Mentor cadastrado com sucesso!","Sucesso")},error:function(e){void 0===e.responseJSON?toastr.error("Ops, ocorreu um erro inesperado! Recarrega a página e tente novamente.","Erro"):($(".form-group-nome").toggleClass("has-error"),$("#nome").focus(),$(".msg-validacao").val("Campo nome não pode ser vazio!"))},complete:function(){$(".ladda-button-demo").ladda("stop")}})}})});